{"version":3,"sources":["/Users/clarkl8n/Projects/Personal/phoenix-config/src/helpers/calc.ts","/Users/clarkl8n/Projects/Personal/phoenix-config/src/helpers/screen.ts","/Users/clarkl8n/Projects/Personal/phoenix-config/src/helpers/window.ts","/Users/clarkl8n/Projects/Personal/phoenix-config/src/config.ts","/Users/clarkl8n/Projects/Personal/phoenix-config/src/helpers/key.ts","/Users/clarkl8n/Projects/Personal/phoenix-config/src/helpers/logger.ts","/Users/clarkl8n/Projects/Personal/phoenix-config/src/helpers/modal.ts","/Users/clarkl8n/Projects/Personal/phoenix-config/src/phoenix.ts"],"sourcesContent":["type FrameRatio = (frame: Rectangle) => Rectangle;\n\nfunction frameRatio(a: Rectangle, b: Rectangle): FrameRatio {\n\tconst widthRatio = b.width / a.width;\n\tconst heightRatio = b.height / a.height;\n\n\treturn ({ width, height, x, y }) => {\n\t\twidth = Math.round(width * widthRatio);\n\t\theight = Math.round(height * heightRatio);\n\t\tx = Math.round(b.x + (x - a.x) * widthRatio);\n\t\ty = Math.round(b.y + (y - a.y) * heightRatio);\n\n\t\treturn { width, height, x, y };\n\t};\n}\n\nfunction moveToFrame(a: Rectangle, b: Rectangle): FrameRatio {\n\t// TODO(mafredri): Try to keep window edges within b.\n\treturn ({ width, height, x, y }) => {\n\t\tx = b.x + x - a.x;\n\t\ty = b.y + y - a.y;\n\t\treturn { width, height, x, y };\n\t};\n}\n\nfunction pointInsideFrame(point: Point, frame: Rectangle): boolean {\n\treturn (\n\t\tpoint.x >= frame.x &&\n\t\tpoint.x <= frame.x + frame.width &&\n\t\tpoint.y >= frame.y &&\n\t\tpoint.y <= frame.y + frame.height\n\t);\n}\n\nfunction sizeMatches(size: Size, match: Size): boolean {\n\treturn (\n\t\tMath.abs(size.height - match.height) < 1 &&\n\t\tMath.abs(size.width - match.width) < 1\n\t);\n}\n\nexport { FrameRatio, frameRatio, moveToFrame, pointInsideFrame, sizeMatches };\n","import { pointInsideFrame } from \"./calc\";\n\nfunction screenAt(point: Point) {\n\tconst screens = Screen.all();\n\n\tfor (const s of screens) {\n\t\tif (pointInsideFrame(point, s.flippedFrame())) {\n\t\t\treturn s;\n\t\t}\n\t}\n\n\tthrow new Error(\"point out of range\");\n}\n\n// Extend ScreenObject.\nScreen.at = screenAt;\n","import { frameRatio, sizeMatches } from \"./calc\";\n\ninterface FrameCache {\n\tscreen: Rectangle;\n\twindow: Rectangle;\n}\n\nconst frameCache: Map<number, FrameCache> = new Map();\n\nEvent.on(\"windowDidClose\", (win: Window) => {\n\t// Cleanup references to unmaximized window frames\n\tframeCache.delete(win.hash());\n});\n\nfunction clearUnmaximized(win: Window) {\n\tframeCache.delete(win.hash());\n}\n\nfunction unmaximizedFrame(win: Window): Rectangle {\n\tlet c = frameCache.get(win.hash());\n\tif (!c) {\n\t\tc = {\n\t\t\tscreen: win.screen().flippedVisibleFrame(),\n\t\t\twindow: win.frame(),\n\t\t};\n\t}\n\tconst ratio = frameRatio(c.screen, win.screen().flippedVisibleFrame());\n\treturn ratio(c.window);\n}\n\nfunction toggleMaximized(win: Window) {\n\tconst id = win.hash();\n\tif (frameCache.has(id)) {\n\t\twin.setFrame(unmaximizedFrame(win));\n\t\twin.clearUnmaximized();\n\t\treturn;\n\t}\n\tframeCache.set(id, {\n\t\tscreen: win.screen().flippedVisibleFrame(),\n\t\twindow: win.frame(),\n\t});\n\twin.maximize();\n}\n\nWindow.prototype.clearUnmaximized = function _clearUnmaximized() {\n\tclearUnmaximized(this);\n};\nWindow.prototype.toggleMaximized = function _toggleMaximized() {\n\ttoggleMaximized(this);\n};\n\nexport { toggleMaximized, clearUnmaximized };\n","export const hyper: Phoenix.ModifierKey[] = [\"cmd\", \"ctrl\", \"alt\"];\nexport const hyperShift: Phoenix.ModifierKey[] = [\n\t\"cmd\",\n\t\"ctrl\",\n\t\"alt\",\n\t\"shift\",\n];\n","const handlers: Map<string, Key> = new Map();\n\nfunction onKey(\n\tkeys: Phoenix.KeyIdentifier | Phoenix.KeyIdentifier[],\n\tmod: Phoenix.ModifierKey[],\n\tcb: <K extends Key, R = unknown>(handler: K, repeated: boolean) => R\n) {\n\tif (Array.isArray(keys)) {\n\t\tconst unbinds = keys.map((key) => onKeySingle(key, mod, cb));\n\t\treturn () => unbinds.forEach((u) => u());\n\t}\n\treturn onKeySingle(keys, mod, cb);\n}\n\nfunction onKeySingle(\n\tkey: Phoenix.KeyIdentifier,\n\tmod: Phoenix.ModifierKey[],\n\tcb: <K extends Key, R = unknown>(handler: K, repeated: boolean) => R\n) {\n\tconst handler = new Key(key, mod, cb);\n\tconst id = createID(key, mod);\n\thandlers.set(id, handler);\n\n\treturn () => unbind(id);\n}\n\nfunction unbind(id: string) {\n\tconst handler = handlers.get(id);\n\tif (handler) {\n\t\thandler.disable();\n\t\thandlers.delete(id);\n\t}\n}\n\nfunction createID(key: string, mod: string[]) {\n\treturn key + mod.sort().join();\n}\n\nfunction getHandler(key: string, mod: string[]) {\n\tconst id = createID(key, mod);\n\treturn handlers.get(id);\n}\n\nexport { onKey, getHandler };\n","function log(...args: unknown[]): void {\n\targs = args.map((arg) => stringify(arg));\n\tPhoenix.log(...args);\n\t// eslint-disable-next-line @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access\n\tconsole.trace(...args);\n}\n\n// tslint:disable-next-line:prefer-object-spread\nexport default Object.assign(log, {\n\tnotify: (...args: unknown[]): void => {\n\t\targs = args.map((arg) => stringify(arg));\n\t\tPhoenix.log(...args);\n\t\tconst message = args.join(\" \");\n\t\tPhoenix.notify(message);\n\t\t// eslint-disable-next-line @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access\n\t\tconsole.trace(...args);\n\t},\n\tnoTrace: (...args: unknown[]): void => {\n\t\targs = args.map((arg) => stringify(arg));\n\t\tPhoenix.log(...args);\n\t\t// eslint-disable-next-line @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access\n\t\tconsole.log(...args);\n\t},\n});\n\nfunction stringify(value: unknown) {\n\tif (value instanceof Error) {\n\t\tlet stack = \"\";\n\t\tif (value.stack) {\n\t\t\tconst s = value.stack.trim().split(\"\\n\");\n\t\t\ts[0] += ` (:${value.line}:${value.column})`;\n\t\t\tconst indented = s.map((line) => \"\\t at \" + line).join(\"\\n\");\n\t\t\tstack = `\\n${indented}`;\n\t\t}\n\t\treturn `\\n${value.toString()}${stack}`;\n\t}\n\tswitch (typeof value) {\n\t\tcase \"object\":\n\t\t\treturn \"\\n\" + JSON.stringify(value, null, 2);\n\t\tcase \"function\":\n\t\t\treturn value.toString();\n\t\tdefault:\n\t\t\treturn value;\n\t}\n}\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\n\nexport { titleModal };\n\nfunction titleModal(text: string, duration = 1, icon?: Phoenix.Icon) {\n\tconst m = new Modal();\n\tm.text = text;\n\tm.duration = duration;\n\tif (icon) {\n\t\tm.icon = icon;\n\t}\n\n\tm.showTitleOn(Screen.main());\n}\n\nModal.prototype.showTitleOn = function _showTitleOn(screen: Screen) {\n\tshowAt(this, screen, 2, 1 + 1 / 3);\n};\n\nModal.prototype.showCenterOn = function _showCenterOn(screen: Screen) {\n\tshowAt(this, screen, 2, 2);\n};\n\nfunction showAt(\n\tmodal: Modal,\n\tscreen: Screen,\n\twidthDiv: number,\n\theightDiv: number\n) {\n\tconst { height, width } = modal.frame();\n\tconst sf = screen.visibleFrame();\n\tmodal.origin = {\n\t\tx: sf.x + (sf.width / widthDiv - width / 2),\n\t\ty: sf.y + (sf.height / heightDiv - height / 2),\n\t};\n\tmodal.show();\n}\n","import \"./helpers/screen\";\nimport \"./helpers/window\";\nimport { hyper, hyperShift } from \"./config\";\nimport { frameRatio, moveToFrame } from \"./helpers/calc\";\nimport { onKey } from \"./helpers/key\";\nimport log from \"./helpers/logger\";\nimport { titleModal } from \"./helpers/modal\";\n\n/**\n * A collection of named Rectangles\n */\ninterface namedFrame {\n\t[key: string]: Rectangle;\n}\n\nPhoenix.set({\n\tdaemon: true,\n\topenAtLogin: true,\n});\n\nconst closeAppsOnBlur = [\n\t\"com.apple.Preview\",\n\t\"com.apple.ActivityMonitor\",\n\t\"com.apple.Console\",\n];\nlet prevActiveAppClose: App | null = null;\nEvent.on(\"appDidActivate\", (app, h) => {\n\t// Close certain apps if they have no windows and lose focus.\n\tconst prevClose = prevActiveAppClose;\n\tprevActiveAppClose = null;\n\n\tconst id = app.bundleIdentifier();\n\tif (closeAppsOnBlur.some((v) => v === id)) {\n\t\tprevActiveAppClose = app;\n\t}\n\n\tif (\n\t\tprevClose &&\n\t\t!prevClose.isTerminated() &&\n\t\tprevClose.windows().length === 0\n\t) {\n\t\tprevClose.terminate();\n\t}\n});\n\nconst composeFrame = (\n\tframe: [x: number, y: number, width: number, height: number]\n): Rectangle => ({\n\tx: frame[0],\n\ty: frame[1],\n\twidth: frame[2],\n\theight: frame[3],\n});\n\nconst namedFrame: namedFrame = {\n\th1: composeFrame([0, 0, 1 / 2, 1]),\n\th2: composeFrame([1 / 2, 0, 1 / 2, 1]),\n\tt1: composeFrame([0, 0, 1 / 3, 1]),\n\tt2: composeFrame([1 / 3, 0, 1 / 3, 1]),\n\tt3: composeFrame([2 / 3, 0, 1 / 3, 1]),\n\ttt1: composeFrame([0 / 3, 0, 2 / 3, 1]),\n\ttt2: composeFrame([1 / 3, 0, 2 / 3, 1]),\n};\n\nconst createFrame = (frame: Rectangle, namedFrame: Rectangle): Rectangle => {\n\tconst isPortrait = frame.width / frame.height <= 1;\n\tconst widthModifier = isPortrait ? namedFrame.height : namedFrame.width;\n\tconst heightModifier = isPortrait ? namedFrame.width : namedFrame.height;\n\tconst xModifier = isPortrait ? namedFrame.y : namedFrame.x;\n\tconst yModifier = isPortrait ? namedFrame.x : namedFrame.y;\n\treturn {\n\t\tx: frame.x + Math.ceil(frame.width * xModifier),\n\t\ty: frame.y + Math.ceil(frame.height * yModifier),\n\t\twidth: Math.floor(frame.width * widthModifier),\n\t\theight: Math.floor(frame.height * heightModifier),\n\t};\n};\n\nconst loopFrames = (\n\tvisibleFrame: Rectangle,\n\tnamedFrames: Array<string>,\n\twin: Window\n) => {\n\tconst frames = namedFrames.map((nF) =>\n\t\tcreateFrame(visibleFrame, namedFrame[nF])\n\t);\n\tlet frame = frames[0];\n\tframes.forEach((element, index) => {\n\t\tconst last = frames.length - 1 === index;\n\t\tif (!last && isRectEqual(win.frame(), element)) frame = frames[index + 1];\n\t});\n\treturn frame;\n};\n\n/**\n * Tile the window in the given frame,\n * tile it horizontally or vertically depending\n * on what makes the most sense\n */\nonKey(\"z\", hyper, () => {\n\tconst win = Window.focused();\n\tif (!win) return;\n\n\tconst visibleFrame = win.screen().flippedVisibleFrame();\n\n\tconst frame = loopFrames(visibleFrame, [\"h1\", \"h2\", \"t1\", \"t2\", \"t3\"], win);\n\n\twin.setFrame(frame);\n\twin.clearUnmaximized();\n});\n\n/**\n * Tile the window with a larger portion\n */\nonKey(\"z\", hyperShift, () => {\n\tconst win = Window.focused();\n\tif (!win) return;\n\n\tconst visibleFrame = win.screen().flippedVisibleFrame();\n\n\tconst frame = loopFrames(visibleFrame, [\"tt1\", \"tt2\"], win);\n\n\twin.setFrame(frame);\n\twin.clearUnmaximized();\n});\n\n/**\n * Move the window to the next screen\n */\nonKey(\"tab\", hyper, () => {\n\tconst win = Window.focused();\n\tif (!win) {\n\t\treturn;\n\t}\n\n\tconst oldScreen = win.screen();\n\tconst newScreen = oldScreen.next();\n\n\tif (oldScreen.isEqual(newScreen)) {\n\t\treturn;\n\t}\n\n\tconst ratio = frameRatio(\n\t\toldScreen.flippedVisibleFrame(),\n\t\tnewScreen.flippedVisibleFrame()\n\t);\n\twin.setFrame(ratio(win.frame()));\n});\n\n/**\n * Toggle maximized state of window\n */\nonKey(\"c\", hyper, () => {\n\tconst win = Window.focused();\n\tif (win) {\n\t\twin.toggleMaximized();\n\t}\n});\n\n/**\n * Center the window on the screen if it's not fullscreen,\n * otherwise, resize it to 60% of the screen size and center it.\n */\nonKey(\"c\", hyperShift, () => {\n\tconst win = Window.focused();\n\tif (!win) {\n\t\treturn;\n\t}\n\n\tconst { width: windowWidth, height: windowHeight } = win.frame();\n\tconst {\n\t\twidth: screenWidth,\n\t\theight: screenHeight,\n\t\tx,\n\t\ty,\n\t} = win.screen().flippedVisibleFrame();\n\n\tconst newWindowWidth =\n\t\twindowWidth !== screenWidth ? windowWidth : screenWidth * 0.6;\n\tconst newWindowHeight =\n\t\twindowHeight !== screenHeight ? windowHeight : screenHeight * 0.6;\n\n\tlog(screenWidth);\n\tlog(\"windowWith\", windowWidth);\n\n\twin.setFrame({\n\t\theight: newWindowHeight,\n\t\twidth: newWindowWidth,\n\t\tx: x + screenWidth / 2 - newWindowWidth / 2,\n\t\ty: y + screenHeight / 2 - newWindowHeight / 2,\n\t});\n});\n\nfunction isRectEqual(a: Record<string, any>, b: Record<string, any>) {\n\tconst akeys = Object.keys(a);\n\tif (akeys.length !== Object.keys(b).length) {\n\t\treturn false;\n\t}\n\treturn akeys.every((k) => a[k] === b[k]);\n}\n\nconst phoenixApp = App.get(\"Phoenix\");\ntitleModal(\"Reloaded!\", 2, phoenixApp && phoenixApp.icon());\n"],"names":[],"mappings":"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"}